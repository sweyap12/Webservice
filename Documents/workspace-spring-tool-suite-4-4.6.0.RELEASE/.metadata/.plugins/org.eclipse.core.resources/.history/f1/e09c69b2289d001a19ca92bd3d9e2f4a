package test.courseapi;

import static org.junit.jupiter.api.Assertions.*;

import org.json.JSONException;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.junit.jupiter.api.Test;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

import Test.courseapi.Employee;
import Test.courseapi.TopicController;

import static org.mockito.Mockito.*;

import java.io.Reader;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

class MockTestDemo {

	@Test
	void test() throws JSONException {
	//  create mock
		TopicController mocked_api = mock(TopicController.class);
		String expected_json_string = "{\"AllEmployeeDetails\":[{\"id\":\"1\",\"name\":\"A\"},{\"id\":\"2\",\"name\":\"B\"},{\"id\":\"4\",\"name\":\"C\"}]}";
        org.json.JSONObject expected = new org.json.JSONObject(expected_json_string);
        
        //some code
//        JSONParser parser = new JSONParser();
//        Object obj  = parser.parse(expected_json_string);
        Map<String, Object> retMap = new Gson().fromJson(
        	    expected.toString(), new TypeToken<HashMap<String, Object>>() {}.getType()
        	);
        JSONParser parser = new JSONParser();
        JSONObject obbb = new JSONObject();
        obbb.putAll(retMap);

//        JSONArray array = new JSONArray();
//        array.add(expected);
//        JSONObject jo = new JSONObject();
//        jo.put('st',expected.toString());

        // define return value for method getUniqueId()
        when(mocked_api.getTopics()).thenReturn(jo);

        System.out.println(jo);
        
        // use mock in test....
        assertEquals(mocked_api.getTopics(), expected_json_string);
	}

}
